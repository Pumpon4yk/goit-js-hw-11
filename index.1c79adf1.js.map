{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAQA,MAAMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAMH,SAASC,cAAc,cAEnC,IAAIG,EAAO,GACPC,EAAO,EACPC,EAAW,GAqCf,SAASC,EAAUC,GACfN,EAAQO,mBAAmB,aAAa,EAAAC,EAAAC,SAAQH,EAAII,KAAKC,OAC5C,IAATR,GACAR,EAAAiB,OAAOC,QAAQ,oBAAoBP,EAAII,KAAKI,qBAG/B,IAAIC,EAAAC,GAAJ,CAAmB,cAC3BC,GAAG,sB,CA+BhB,SAASC,EAAYC,GACjBlB,EAAImB,SAAWD,EAGXlB,EAAIoB,YADJF,EACkB,UAIJ,W,CAjFtBtB,EAAKyB,iBAAiB,UAGtBC,eAA0BC,GAQtB,GAPAA,EAAEC,iBACFvB,EAAOsB,EAAEE,cAAcC,SAASC,YAAYC,MAE5C7B,EAAQ8B,UAAY,GACpB7B,EAAI8B,UAAUC,IAAI,UAClB7B,EAAO,EAEM,KAATD,EACA,OAAOP,EAAAiB,OAAOqB,QAAQ,qBAG1B,IAEI,GADA7B,QAAiB,EAAA8B,EAAAzB,SAAOP,GACU,IAA9BE,EAASM,KAAKC,KAAKwB,OACnB,OAAOxC,EAAAiB,OAAOwB,QAAQ,4EAE1B,GAAIhC,EAASM,KAAKC,KAAKwB,OAAS,GAG5B,OAFAlC,EAAI8B,UAAUC,IAAI,eAClB3B,EAAUD,GAGdH,EAAI8B,UAAUM,OAAO,UACrBnB,GAAY,GACZb,EAAUD,GACVc,GAAY,E,CACd,MAAOoB,GACL,OAAO3C,EAAAiB,OAAO2B,KAAK,6D,KA7B3BtC,EAAIqB,iBAAiB,SA4CrBC,iBACIL,GAAY,GACZf,GAAQ,EAER,IACI,MAAMqC,QAAY,EAAAN,EAAAzB,SAAOP,EAAMC,GAE3BqC,EAAI9B,KAAKC,KAAKwB,OAAS,KACvBlC,EAAI8B,UAAUC,IAAI,UAClBrC,EAAAiB,OAAO2B,KAAK,+DAGhBlC,EAAUmC,GACVtB,GAAY,GAEZ,MAAQuB,OAAQC,GAAe1C,EAAQ2C,kBAAkBC,wBAEzDC,OAAOC,SAAS,CACZC,IAAkB,EAAbL,EACLM,SAAU,U,CAEhB,MAAOV,GACLrC,EAAI8B,UAAUC,IAAI,UAClBrC,EAAAiB,OAAO2B,KAAK,6D","sources":["src/js/gallery_btn_load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport getApi from './getApi';\nimport cardTml from \"../partials/card.hbs\"\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery')\nconst btn = document.querySelector('.load-more')\n\nlet name = '';\nlet page = 1;\nlet response = {};\n\nform.addEventListener('submit', searchFoto)\nbtn.addEventListener('click', onClickBtn)\n\nasync function searchFoto(e) {\n    e.preventDefault()\n    name = e.currentTarget.elements.searchQuery.value\n\n    gallery.innerHTML = '';\n    btn.classList.add('hidden')\n    page = 1\n\n    if (name === '') {\n        return Notify.warning(\"No data to search\");\n    }\n\n    try {\n        response = await getApi(name)\n        if (response.data.hits.length === 0) {\n            return Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        }\n        if (response.data.hits.length < 39) {\n            btn.classList.add('hidden')\n            creatCard(response)\n            return\n        }\n        btn.classList.remove('hidden')\n        btnLoadMore(true)\n        creatCard(response)\n        btnLoadMore(false)\n    } catch (error) {\n        return Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction creatCard(arr) {\n    gallery.insertAdjacentHTML('beforeend', cardTml(arr.data.hits));\n    if (page === 1) {\n        Notify.success(`Hooray! We found ${arr.data.totalHits} images.`);\n    }\n\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.on('show.simplelightbox')\n}\n\nasync function onClickBtn() {\n    btnLoadMore(true)\n    page += 1;\n\n    try {\n        const res = await getApi(name, page)\n\n        if (res.data.hits.length < 39) {\n            btn.classList.add('hidden')\n            Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        }\n\n        creatCard(res)\n        btnLoadMore(false)\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n        btn.classList.add('hidden')\n        Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction btnLoadMore(bool) {\n    btn.disabled = bool;\n\n    if (bool) {\n        btn.textContent = 'Loading'\n        return\n    }\n\n    btn.textContent = 'Load more'\n}\n\n"],"names":["$iQIUW","parcelRequire","$15c0b6b278f9c41a$var$form","document","querySelector","$15c0b6b278f9c41a$var$gallery","$15c0b6b278f9c41a$var$btn","$15c0b6b278f9c41a$var$name","$15c0b6b278f9c41a$var$page","$15c0b6b278f9c41a$var$response","$15c0b6b278f9c41a$var$creatCard","arr","insertAdjacentHTML","$6A20M","default","data","hits","Notify","success","totalHits","$parcel$interopDefault","$fZKcF","on","$15c0b6b278f9c41a$var$btnLoadMore","bool","disabled","textContent","addEventListener","async","e","preventDefault","currentTarget","elements","searchQuery","value","innerHTML","classList","add","warning","$kmrz3","length","failure","remove","error","info","res","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior"],"version":3,"file":"index.1c79adf1.js.map"}