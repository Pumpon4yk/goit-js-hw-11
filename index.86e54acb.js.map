{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAQMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAMH,SAASC,cAAc,cAE/BG,EAAO,GACPC,EAAO,EACPC,EAAW,G,SAKAC,I,OAAAA,EAAfC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,EAA0BC,G,qEACtBA,EAAEC,iBACFT,EAAOQ,EAAEE,cAAcC,SAASC,YAAYC,MAE5Cf,EAAQgB,UAAY,GACpBf,EAAIgB,UAAUC,IAAI,UAClBf,EAAO,EAEM,KAATD,EAAW,C,wCACJiB,EAAAC,OAAOC,QAAQ,sB,kCAIL,EAAAC,EAAAC,SAAOrB,G,WACU,KADlCE,EAAQoB,EAAAC,MACKC,KAAKC,KAAKC,OAAY,C,yCACxBT,EAAAC,OAAOS,QAAQ,6E,aAEtBzB,EAASsB,KAAKC,KAAKC,OAAS,IAAE,C,uBAC9B3B,EAAIgB,UAAUC,IAAI,UAClBY,EAAU1B,G,2BAGdH,EAAIgB,UAAUc,OAAO,UACrBC,GAAY,GACZF,EAAU1B,GACV4B,GAAY,G,2EAELb,EAAAC,OAAOa,KAAK,+D,2DA3BFC,MAAAC,KAAAC,U,CAgCzB,SAASN,EAAUO,GACfrC,EAAQsC,mBAAmB,aAAa,EAAAC,EAAAhB,SAAQc,EAAIX,KAAKC,OAC5C,IAATxB,GACAgB,EAAAC,OAAOoB,QAAQ,oBAAuCC,OAAnBJ,EAAIX,KAAKgB,UAAU,aAGzC,IAAIpC,EAAAqC,GAAJ,CAAmB,cAC3BC,GAAG,sB,UAGDC,I,OAAAA,EAAfvC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,I,IAKcqC,EAUyBC,EAAfC,E,yEAdpBhB,GAAY,GACZ7B,GAAQ,E,mBAGc,EAAAmB,EAAAC,SAAOrB,EAAMC,G,QAAzB2C,EAAGtB,EAAAC,MAEDC,KAAKC,KAAKC,OAAS,KACvB3B,EAAIgB,UAAUC,IAAI,UAClBC,EAAAC,OAAOa,KAAK,+DAGhBH,EAAUgB,GACVd,GAAY,GAEmBe,EAAA/C,EAAQiD,kBAAkBC,wBAAjDF,EAAuBD,EAAvBI,OAERC,OAAOC,SAAS,CACZC,IAAkB,EAAbN,EACLO,SAAU,W,kDAGdtD,EAAIgB,UAAUC,IAAI,UAClBC,EAAAC,OAAOa,KAAK,8D,2DAvBKC,MAAAC,KAAAC,U,CA4BzB,SAASJ,EAAYwB,GACjBvD,EAAIwD,SAAWD,EAGXvD,EAAIyD,YADJF,EACkB,UAIJ,W,CAjFtB3D,EAAK8D,iBAAiB,U,SAGIjD,G,OAAXL,EAAU6B,MAAAC,KAAAC,U,IAFzBnC,EAAI0D,iBAAiB,S,kBA4CNd,EAAUX,MAAAC,KAAAC,U","sources":["src/js/gallery_btn_load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport getApi from './getApi';\nimport cardTml from \"../partials/card.hbs\"\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery')\nconst btn = document.querySelector('.load-more')\n\nlet name = '';\nlet page = 1;\nlet response = {};\n\nform.addEventListener('submit', searchFoto)\nbtn.addEventListener('click', onClickBtn)\n\nasync function searchFoto(e) {\n    e.preventDefault()\n    name = e.currentTarget.elements.searchQuery.value\n\n    gallery.innerHTML = '';\n    btn.classList.add('hidden')\n    page = 1\n\n    if (name === '') {\n        return Notify.warning(\"No data to search\");\n    }\n\n    try {\n        response = await getApi(name)\n        if (response.data.hits.length === 0) {\n            return Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        }\n        if (response.data.hits.length < 39) {\n            btn.classList.add('hidden')\n            creatCard(response)\n            return\n        }\n        btn.classList.remove('hidden')\n        btnLoadMore(true)\n        creatCard(response)\n        btnLoadMore(false)\n    } catch (error) {\n        return Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction creatCard(arr) {\n    gallery.insertAdjacentHTML('beforeend', cardTml(arr.data.hits));\n    if (page === 1) {\n        Notify.success(`Hooray! We found ${arr.data.totalHits} images.`);\n    }\n\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.on('show.simplelightbox')\n}\n\nasync function onClickBtn() {\n    btnLoadMore(true)\n    page += 1;\n\n    try {\n        const res = await getApi(name, page)\n\n        if (res.data.hits.length < 39) {\n            btn.classList.add('hidden')\n            Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        }\n\n        creatCard(res)\n        btnLoadMore(false)\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n        btn.classList.add('hidden')\n        Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction btnLoadMore(bool) {\n    btn.disabled = bool;\n\n    if (bool) {\n        btn.textContent = 'Loading'\n        return\n    }\n\n    btn.textContent = 'Load more'\n}\n\n"],"names":["$bpxeT","parcelRequire","$7ce91d1b6008c2f8$var$form","document","querySelector","$7ce91d1b6008c2f8$var$gallery","$7ce91d1b6008c2f8$var$btn","$7ce91d1b6008c2f8$var$name","$7ce91d1b6008c2f8$var$page","$7ce91d1b6008c2f8$var$response","$7ce91d1b6008c2f8$var$_searchFoto","$parcel$interopDefault","$2TvXO","mark","_callee","e","preventDefault","currentTarget","elements","searchQuery","value","innerHTML","classList","add","$h6c0i","Notify","warning","$kJ0yB","default","_ctx","sent","data","hits","length","failure","$7ce91d1b6008c2f8$var$creatCard","remove","$7ce91d1b6008c2f8$var$btnLoadMore","info","apply","this","arguments","arr","insertAdjacentHTML","$llrIs","success","concat","totalHits","$5IjG7","on","$7ce91d1b6008c2f8$var$_onClickBtn","res","ref","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","bool","disabled","textContent","addEventListener"],"version":3,"file":"index.86e54acb.js.map"}