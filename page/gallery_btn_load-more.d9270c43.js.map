{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAQMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAMH,SAASC,cAAc,cAE/BG,EAAO,GACPC,EAAO,EACPC,EAAW,GAETC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,c,SAMrBC,I,OAAAA,EAAfF,EAAAX,EAAA,CAAAW,EAAAG,GAAAC,MAAA,SAAAC,EAA0BC,G,qEACtBA,EAAEC,iBACFX,EAAOU,EAAEE,cAAcC,SAASC,YAAYC,MAAMC,OAElDlB,EAAQmB,UAAY,GACpBlB,EAAImB,UAAUC,IAAI,UAClBlB,EAAO,EAEM,KAATD,EAAW,C,wCACJoB,EAAAC,OAAOC,QAAQ,sB,kCAIL,EAAAC,EAAAC,SAAOxB,EAAMC,G,WACI,KADlCC,EAAQuB,EAAAC,MACKC,KAAKC,KAAKC,OAAY,C,yCACxBT,EAAAC,OAAOS,QAAQ,6E,aAEtB5B,EAASyB,KAAKC,KAAKC,OAAS,IAAE,C,uBAC9B9B,EAAImB,UAAUC,IAAI,UAClBY,EAAU7B,G,2BAGdH,EAAImB,UAAUc,OAAO,UACrBC,GAAY,GACZF,EAAU7B,GACV+B,GAAY,G,2EAELb,EAAAC,OAAOa,KAAK,+D,2DA3BFC,MAAAC,KAAAC,U,CAgCzB,SAASN,EAAUO,GACfxC,EAAQyC,mBAAmB,aAAa,EAAAC,EAAAhB,SAAQc,EAAIX,KAAKC,OAC5C,IAAT3B,GACAmB,EAAAC,OAAOoB,QAAQ,oBAAuCC,OAAnBJ,EAAIX,KAAKgB,UAAU,aAE1DxC,EAASyC,S,UAIEC,I,OAAAA,EAAfzC,EAAAX,EAAA,CAAAW,EAAAG,GAAAC,MAAA,SAAAC,I,IAKcqC,EAUyBC,EAAfC,E,yEAdpBf,GAAY,GACZhC,GAAQ,E,mBAGc,EAAAsB,EAAAC,SAAOxB,EAAMC,G,QAAzB6C,EAAGrB,EAAAC,MAEDC,KAAKC,KAAKC,OAAS,KACvB9B,EAAImB,UAAUC,IAAI,UAClBC,EAAAC,OAAOa,KAAK,+DAGhBH,EAAUe,GACVb,GAAY,GAEmBc,EAAAjD,EAAQmD,kBAAkBC,wBAAjDF,EAAuBD,EAAvBI,OAERC,OAAOC,SAAS,CACZC,IAAkB,EAAbN,EACLO,SAAU,W,kDAGdxD,EAAImB,UAAUC,IAAI,UAClBC,EAAAC,OAAOa,KAAK,8D,2DAvBKC,MAAAC,KAAAC,U,CA4BzB,SAASJ,EAAYuB,GACjBzD,EAAI0D,SAAWD,EAGXzD,EAAI2D,YADJF,EACkB,UAIJ,W,CAhFtB7D,EAAKgE,iBAAiB,U,SAGIjD,G,OAAXJ,EAAU6B,MAAAC,KAAAC,U,IAFzBtC,EAAI4D,iBAAiB,S,kBA2CNd,EAAUV,MAAAC,KAAAC,U","sources":["src/js/gallery_btn_load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport getApi from './getApi';\nimport cardTml from \"../partials/card.hbs\";\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst btn = document.querySelector('.load-more');\n\nlet name = '';\nlet page = 1;\nlet response = {};\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\n\nform.addEventListener('submit', searchFoto);\nbtn.addEventListener('click', onClickBtn);\n\nasync function searchFoto(e) {\n    e.preventDefault();\n    name = e.currentTarget.elements.searchQuery.value.trim();\n\n    gallery.innerHTML = '';\n    btn.classList.add('hidden');\n    page = 1;\n\n    if (name === '') {\n        return Notify.warning(\"No data to search\");\n    }\n\n    try {\n        response = await getApi(name, page);\n        if (response.data.hits.length === 0) {\n            return Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        }\n        if (response.data.hits.length < 40) {\n            btn.classList.add('hidden');\n            creatCard(response);\n            return\n        }\n        btn.classList.remove('hidden');\n        btnLoadMore(true);\n        creatCard(response);\n        btnLoadMore(false);\n    } catch (error) {\n        return Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction creatCard(arr) {\n    gallery.insertAdjacentHTML('beforeend', cardTml(arr.data.hits));\n    if (page === 1) {\n        Notify.success(`Hooray! We found ${arr.data.totalHits} images.`);\n    }\n    lightbox.refresh();\n\n}\n\nasync function onClickBtn() {\n    btnLoadMore(true);\n    page += 1;\n\n    try {\n        const res = await getApi(name, page)\n\n        if (res.data.hits.length < 40) {\n            btn.classList.add('hidden')\n            Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        }\n\n        creatCard(res);\n        btnLoadMore(false);\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n        btn.classList.add('hidden');\n        Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction btnLoadMore(bool) {\n    btn.disabled = bool;\n\n    if (bool) {\n        btn.textContent = 'Loading';\n        return;\n    }\n\n    btn.textContent = 'Load more';\n}\n\n"],"names":["$bpxeT","parcelRequire","$7ce91d1b6008c2f8$var$form","document","querySelector","$7ce91d1b6008c2f8$var$gallery","$7ce91d1b6008c2f8$var$btn","$7ce91d1b6008c2f8$var$name","$7ce91d1b6008c2f8$var$page","$7ce91d1b6008c2f8$var$response","$7ce91d1b6008c2f8$var$lightbox","$parcel$interopDefault","$5IjG7","$7ce91d1b6008c2f8$var$_searchFoto","$2TvXO","mark","_callee","e","preventDefault","currentTarget","elements","searchQuery","value","trim","innerHTML","classList","add","$h6c0i","Notify","warning","$kJ0yB","default","_ctx","sent","data","hits","length","failure","$7ce91d1b6008c2f8$var$creatCard","remove","$7ce91d1b6008c2f8$var$btnLoadMore","info","apply","this","arguments","arr","insertAdjacentHTML","$llrIs","success","concat","totalHits","refresh","$7ce91d1b6008c2f8$var$_onClickBtn","res","ref","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","bool","disabled","textContent","addEventListener"],"version":3,"file":"gallery_btn_load-more.d9270c43.js.map"}