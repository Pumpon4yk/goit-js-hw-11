{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAQA,MAAMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAMH,SAASC,cAAc,cAEnC,IAAIG,EAAO,GACPC,EAAO,EACPC,EAAW,GAEf,MAAMC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,cAsCpC,SAASC,EAAUC,GACfT,EAAQU,mBAAmB,aAAa,EAAAC,EAAAC,SAAQH,EAAII,KAAKC,OAC5C,IAATX,GACAR,EAAAoB,OAAOC,QAAQ,oBAAoBP,EAAII,KAAKI,qBAEhDZ,EAASa,S,CAgCb,SAASC,EAAYC,GACjBnB,EAAIoB,SAAWD,EAGXnB,EAAIqB,YADJF,EACkB,UAIJ,W,CAhFtBvB,EAAK0B,iBAAiB,UAGtBC,eAA0BC,GAQtB,GAPAA,EAAEC,iBACFxB,EAAOuB,EAAEE,cAAcC,SAASC,YAAYC,MAAMC,OAElD/B,EAAQgC,UAAY,GACpB/B,EAAIgC,UAAUC,IAAI,UAClB/B,EAAO,EAEM,KAATD,EACA,OAAOP,EAAAoB,OAAOoB,QAAQ,qBAG1B,IAEI,GADA/B,QAAiB,EAAAgC,EAAAxB,SAAOV,EAAMC,GACI,IAA9BC,EAASS,KAAKC,KAAKuB,OACnB,OAAO1C,EAAAoB,OAAOuB,QAAQ,4EAE1B,GAAIlC,EAASS,KAAKC,KAAKuB,OAAS,GAG5B,OAFApC,EAAIgC,UAAUC,IAAI,eAClB1B,EAAUJ,GAGdH,EAAIgC,UAAUM,OAAO,UACrBpB,GAAY,GACZX,EAAUJ,GACVe,GAAY,E,CACd,MAAOqB,GACL,OAAO7C,EAAAoB,OAAO0B,KAAK,6D,KA7B3BxC,EAAIsB,iBAAiB,SA2CrBC,iBACIL,GAAY,GACZhB,GAAQ,EAER,IACI,MAAMuC,QAAY,EAAAN,EAAAxB,SAAOV,EAAMC,GAE3BuC,EAAI7B,KAAKC,KAAKuB,OAAS,KACvBpC,EAAIgC,UAAUC,IAAI,UAClBvC,EAAAoB,OAAO0B,KAAK,+DAGhBjC,EAAUkC,GACVvB,GAAY,GAEZ,MAAQwB,OAAQC,GAAe5C,EAAQ6C,kBAAkBC,wBAEzDC,OAAOC,SAAS,CACZC,IAAkB,EAAbL,EACLM,SAAU,U,CAEhB,MAAOV,GACLvC,EAAIgC,UAAUC,IAAI,UAClBvC,EAAAoB,OAAO0B,KAAK,6D","sources":["src/js/gallery_btn_load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport getApi from './getApi';\nimport cardTml from \"../partials/card.hbs\";\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst btn = document.querySelector('.load-more');\n\nlet name = '';\nlet page = 1;\nlet response = {};\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\n\nform.addEventListener('submit', searchFoto);\nbtn.addEventListener('click', onClickBtn);\n\nasync function searchFoto(e) {\n    e.preventDefault();\n    name = e.currentTarget.elements.searchQuery.value.trim();\n\n    gallery.innerHTML = '';\n    btn.classList.add('hidden');\n    page = 1;\n\n    if (name === '') {\n        return Notify.warning(\"No data to search\");\n    }\n\n    try {\n        response = await getApi(name, page);\n        if (response.data.hits.length === 0) {\n            return Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        }\n        if (response.data.hits.length < 40) {\n            btn.classList.add('hidden');\n            creatCard(response);\n            return\n        }\n        btn.classList.remove('hidden');\n        btnLoadMore(true);\n        creatCard(response);\n        btnLoadMore(false);\n    } catch (error) {\n        return Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction creatCard(arr) {\n    gallery.insertAdjacentHTML('beforeend', cardTml(arr.data.hits));\n    if (page === 1) {\n        Notify.success(`Hooray! We found ${arr.data.totalHits} images.`);\n    }\n    lightbox.refresh();\n\n}\n\nasync function onClickBtn() {\n    btnLoadMore(true);\n    page += 1;\n\n    try {\n        const res = await getApi(name, page)\n\n        if (res.data.hits.length < 40) {\n            btn.classList.add('hidden')\n            Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        }\n\n        creatCard(res);\n        btnLoadMore(false);\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n        btn.classList.add('hidden');\n        Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n}\n\nfunction btnLoadMore(bool) {\n    btn.disabled = bool;\n\n    if (bool) {\n        btn.textContent = 'Loading';\n        return;\n    }\n\n    btn.textContent = 'Load more';\n}\n\n"],"names":["$iQIUW","parcelRequire","$15c0b6b278f9c41a$var$form","document","querySelector","$15c0b6b278f9c41a$var$gallery","$15c0b6b278f9c41a$var$btn","$15c0b6b278f9c41a$var$name","$15c0b6b278f9c41a$var$page","$15c0b6b278f9c41a$var$response","$15c0b6b278f9c41a$var$lightbox","$parcel$interopDefault","$fZKcF","$15c0b6b278f9c41a$var$creatCard","arr","insertAdjacentHTML","$6A20M","default","data","hits","Notify","success","totalHits","refresh","$15c0b6b278f9c41a$var$btnLoadMore","bool","disabled","textContent","addEventListener","async","e","preventDefault","currentTarget","elements","searchQuery","value","trim","innerHTML","classList","add","warning","$kmrz3","length","failure","remove","error","info","res","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior"],"version":3,"file":"gallery_btn_load-more.a3c58fb8.js.map"}